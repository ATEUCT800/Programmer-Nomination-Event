<template>
    <lightning-card>
        <template if:false={hasVoted}>
            <div>
                <template if:true={campaign}>
                    <div class='campaign-name'>
                        <p><lightning-formatted-text value="Current campaign: "></lightning-formatted-text><lightning-formatted-text value={campaign.Name}></lightning-formatted-text></p>
                    </div>
                    <div>    
                    <template if:true={nominations}>
                        <template for:each={nominations} for:item="nomination">
                            
                            <lightning-layout class="wrapper slds-grid slds-wrap slds-m-bottom--xx-small" key={nomination.Id}>
                                    <lightning-layout-item class='nomonation-title slds-size--1-of-5'>
                                        <p><lightning-formatted-text value={nomination.Name}></lightning-formatted-text></p>
                                        <img class="nomination-picture" src={nomination.Avatar__c} alt="Nomination picture">
                                    </lightning-layout-item>
                                    <lightning-layout multiple-rows="true" class="slds-size--4-of-5">
                                        <template if:true={nomination.contacts}>
                                            <template for:each={nomination.contacts} for:item="contact">
                                                <lightning-layout-item key={contact} class='fields-wrapper slds-box slds-size--1-of-4' onclick={handleClickViewForm} data-id1={contact.Id} data-id2={nomination.Id}>
                                                    <lightning-record-view-form record-id={contact.Id} object-api-name="Contact">
                                                        <lightning-layout-item class='contact-field slds-size--1-of-3 slds-float--left slds-m-right--small'>
                                                            <span class="profile-picture slds-avatar slds-avatar--circle">
                                                                <img src={contact.Avatar__c} alt="Profile picture">
                                                            </span>
                                                            <lightning-output-field field-name="FirstName">
                                                            </lightning-output-field>
                                                            <lightning-output-field field-name="LastName">
                                                            </lightning-output-field>
                                                            <lightning-output-field field-name="Department">
                                                            </lightning-output-field>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item class='description-field slds-size--2-of-3'>
                                                            <p><lightning-formatted-text value={contact.description}></lightning-formatted-text></p>
                                                        </lightning-layout-item>
                                                    </lightning-record-view-form>
                                                </lightning-layout-item>
                                            </template>
                                        </template>
                                    </lightning-layout>
                                <template if:false={nomination.contacts}>
                                    <p key={nomination.Id} class='campaign-name'>There are no nominees in this nomination</p>
                                </template>
                            </lightning-layout>
                        </template>
                        <div class="button-submit">
                            <lightning-button variant="brand" label="Submit" title="Primary action" onclick={handleClickButton} class='slds-m-left--xx-small'></lightning-button>
                        </div>
                    </template>    
                    </div>
                    <template if:false={nominations}>
                        <p class='campaign-name'><lightning-formatted-text value="You have already voted in all nominations, thank you!"></lightning-formatted-text></p>
                    </template>
                </template> 
                <template if:false={campaign}>
                    <p class='campaign-name'>There are no campaigns!</p>
                </template>
            </div>
        </template>
        <template if:true={hasVoted}>
            <p class='campaign-name'>Thank you for your vote!</p>
        </template>   
    </lightning-card>
</template>